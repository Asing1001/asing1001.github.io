<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="nNUMPUrqNNot_PkJfPzacCg4M0b6Mz5viTh_YBlxew8">














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">




  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=20170328?v=6.3.0">










<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    fastclick: true,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'RG9H1JR5W2',
      apiKey: 'dcbd98ce20c49cb7d89d4f1b6a3a2206',
      indexName: 'blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  


<link rel="search" href="/opensearch.xml" type="application/opensearchdescription+xml" title="Sing's Log">
<script data-ad-client="ca-pub-6735629726636183" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>



  <meta name="description" content="Sing&apos;s log, a developer&apos;s blog">
<meta name="keywords" content="Web development, Front-End, Javascript, IT, Hexo, NexT">
<meta property="og:type" content="website">
<meta property="og:title" content="Sing&#39;s Log">
<meta property="og:url" content="https://www.paddingleft.com/index.html">
<meta property="og:site_name" content="Sing&#39;s Log">
<meta property="og:description" content="Sing&apos;s log, a developer&apos;s blog">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sing&#39;s Log">
<meta name="twitter:description" content="Sing&apos;s log, a developer&apos;s blog">






  <link rel="canonical" href="https://www.paddingleft.com/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Sing's Log</title>
  
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '546618865728828',
      xfbml      : true,
      version    : 'v2.10'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-93986058-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-93986058-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sing's Log</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">Knowledge worth sharing</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-timeline">
    <a href="/timeline/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Timeline</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-portfolio">
    <a href="/portfolio/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-book"></i> <br>Portfolio</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2024/02/16/Classification-with-scikit-learn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2024/02/16/Classification-with-scikit-learn/" itemprop="url">
                  Leveraging scikit-learn for Invoice Classification using Text Data
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2024-02-16 16:45:47 / Modified: 16:55:37" itemprop="dateCreated datePublished" datetime="2024-02-16T16:45:47+00:00">2024-02-16</time>
            

            
              

              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2024/02/16/Classification-with-scikit-learn/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2024/02/16/Classification-with-scikit-learn/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>In the realm of data science and machine learning, text classification is a common task with a wide range of applications. One such application is invoice classification, where invoices are categorized based on their textual content. In this blog post, we’ll explore how to accomplish this task using scikit-learn, a popular machine learning library in Python.</p>
<h2 id="Understanding-the-Data"><a href="#Understanding-the-Data" class="headerlink" title="Understanding the Data"></a>Understanding the Data</h2><p>Before diving into the code, let’s first understand the data we’re working with. Our dataset consists of invoices along with their corresponding categories. We’ve gathered data from various sources, including human-marked data, generated data, and crawled data from the web.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load the data</span></span><br><span class="line">data1 = pd.read_csv(<span class="string">'./data/human-marked.csv'</span>)</span><br><span class="line">data2 = pd.read_csv(<span class="string">'./data/generated/train.csv'</span>)</span><br><span class="line">data3 = pd.read_csv(<span class="string">'./data/crawled/train.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Concatenate the data into a single DataFrame</span></span><br><span class="line">data = pd.concat([data1, data2, data3])</span><br></pre></td></tr></table></figure>
<h2 id="Data-Preprocessing-and-Exploration"><a href="#Data-Preprocessing-and-Exploration" class="headerlink" title="Data Preprocessing and Exploration"></a>Data Preprocessing and Exploration</h2><p>After loading the data, we preprocess it to ensure uniformity, such as removing redundant spaces from category labels. Additionally, we explore the distribution of categories in our dataset to gain insights into the class distribution.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Preprocessing</span></span><br><span class="line">data[<span class="string">'categories'</span>] = data[<span class="string">'categories'</span>].str.strip()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Explore category distribution</span></span><br><span class="line">category_counts = data[<span class="string">'categories'</span>].value_counts()</span><br></pre></td></tr></table></figure>
<h2 id="Building-the-Classification-Pipeline"><a href="#Building-the-Classification-Pipeline" class="headerlink" title="Building the Classification Pipeline"></a>Building the Classification Pipeline</h2><p>With our data ready, we construct a classification pipeline using scikit-learn. Our pipeline consists of a TF-IDF vectorizer for feature extraction and a linear support vector classifier (LinearSVC) as the classification model.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.feature_extraction.text <span class="keyword">import</span> TfidfVectorizer</span><br><span class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</span><br><span class="line"><span class="keyword">from</span> sklearn.calibration <span class="keyword">import</span> CalibratedClassifierCV</span><br><span class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> LinearSVC</span><br><span class="line"></span><br><span class="line"><span class="comment"># Split the data into training and testing sets</span></span><br><span class="line">X = data[<span class="string">'text'</span>].values</span><br><span class="line">y = data[<span class="string">'categories'</span>].values</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the pipeline</span></span><br><span class="line">pipeline = Pipeline([</span><br><span class="line">    (<span class="string">'tfidf'</span>, TfidfVectorizer()),</span><br><span class="line">    (<span class="string">'clf'</span>, CalibratedClassifierCV(LinearSVC())),</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
<h2 id="Model-Training-and-Evaluation"><a href="#Model-Training-and-Evaluation" class="headerlink" title="Model Training and Evaluation"></a>Model Training and Evaluation</h2><p>Next, we train our model using grid search to find the optimal hyperparameters and evaluate its performance on the test set.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> classification_report</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the parameter grid for grid search</span></span><br><span class="line">param_grid = &#123;</span><br><span class="line">    <span class="comment"># Hyperparameters to tune</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Perform grid search with cross-validation</span></span><br><span class="line">grid_search = GridSearchCV(pipeline, param_grid, cv=<span class="number">2</span>)</span><br><span class="line">grid_search.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Evaluate the model on the test set</span></span><br><span class="line">best_estimator = grid_search.best_estimator_</span><br><span class="line">y_pred = best_estimator.predict(X_test)</span><br><span class="line">report = classification_report(y_test, y_pred)</span><br></pre></td></tr></table></figure>
<h2 id="Inference-and-Model-Deployment"><a href="#Inference-and-Model-Deployment" class="headerlink" title="Inference and Model Deployment"></a>Inference and Model Deployment</h2><p>Finally, we demonstrate how to use the trained model for inference on new invoice texts and save the model for future use.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example inference on new invoice texts</span></span><br><span class="line">test_texts = [<span class="string">'台電電費'</span>, <span class="string">'Apple'</span>, <span class="string">'netflix訂閱'</span>, <span class="string">'瓦斯現金券'</span>, <span class="string">'不鏽鋼鍋'</span>]</span><br><span class="line">results = get_prediction_probabilities(best_estimator, test_texts)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Save the trained model</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'model.pkl'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">    pickle.dump(best_estimator, file)</span><br></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In this blog post, we’ve demonstrated how to leverage scikit-learn to classify invoices based on their textual content. By building a robust classification pipeline and fine-tuning hyperparameters using grid search, we can achieve accurate categorization of invoices, enabling streamlined invoice processing and management.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/11/21/IntelliJ-error-Cannot-resolve-symbol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/21/IntelliJ-error-Cannot-resolve-symbol/" itemprop="url">
                  Resolving IntelliJ 'Cannot Resolve Symbol' Error
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-11-21 16:21:40" itemprop="dateCreated datePublished" datetime="2023-11-21T16:21:40+00:00">2023-11-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/21/IntelliJ-error-Cannot-resolve-symbol/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/21/IntelliJ-error-Cannot-resolve-symbol/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>If you’ve encountered the <code>Cannot resolve symbol...</code> error in IntelliJ IDEA after switching branches, you’re not alone. This frustrating issue can occur even when your code is error-free and compiles successfully from the command line.</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>To resolve this issue, follow these steps:</p>
<ol>
<li>Expand the Maven plugin in IntelliJ IDEA’s sidebar.</li>
<li>Click the <code>Reload All Maven Projects</code> button with the refresh icon.</li>
</ol>
<img src="/2023/11/21/IntelliJ-error-Cannot-resolve-symbol/intellij-error.png">
<p>By following these steps, you can make the <code>Cannot resolve symbol...</code> error vanish and continue coding smoothly. This simple fix can save you time and frustration.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>For more details and community discussions on this issue, check out <a href="https://stackoverflow.com/questions/5905896/intellij-inspection-gives-cannot-resolve-symbol-but-still-compiles-code?page=1&amp;tab=scoredesc#tab-top" target="_blank" rel="noopener">this Stack Overflow thread</a>.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/11/08/Automating-Google-Calendar-from-Gmail-Content/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/08/Automating-Google-Calendar-from-Gmail-Content/" itemprop="url">
                  Automating Google Calendar from Gmail Content
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-11-08 12:09:31" itemprop="dateCreated datePublished" datetime="2023-11-08T12:09:31+00:00">2023-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/08/Automating-Google-Calendar-from-Gmail-Content/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/08/Automating-Google-Calendar-from-Gmail-Content/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>As a software engineer based in Dublin, Ireland, I often find myself juggling a busy schedule. Managing my fitness classes, work meetings, and personal commitments can be quite a challenge. To streamline this process, I decided to embark on a project to automatically create Google Calendar events from Gympass confirmation emails. In this blog post, I’ll walk you through the steps and code I used to accomplish this task.</p>
<img src="/2023/11/08/Automating-Google-Calendar-from-Gmail-Content/gmail-to-google-calendar.png">
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>Gympass, a popular fitness service, sends confirmation emails whenever I book a fitness class. These emails contain valuable information about the class, such as the date, time, location, and instructor. Manually adding these details to my Google Calendar was becoming a time-consuming task.</p>
<h2 id="The-Solution"><a href="#The-Solution" class="headerlink" title="The Solution"></a>The Solution</h2><p>To automate this process, I created a Google Apps Script that runs in my Gmail account. This script scans my inbox for Gympass confirmation emails, extracts the relevant information, and creates corresponding Google Calendar events. Here’s an overview of how it works:</p>
<ol>
<li><p><strong>Create a Google Apps Script Project</strong>:</p>
<ul>
<li>Open your Gmail account in a web browser.</li>
<li>Click on the “Apps Script” icon in the top-right corner (it looks like a square with a pencil).</li>
<li>This will open the Google Apps Script editor.</li>
</ul>
</li>
<li><p><strong>Write the Script</strong>:</p>
<ul>
<li>In the Google Apps Script editor, copy and paste the script code provided in this blog post.</li>
</ul>
</li>
<li><p><strong>Save and Name the Project</strong>:</p>
<ul>
<li>Give your project a name by clicking on “Untitled Project” at the top left and entering a name.</li>
</ul>
</li>
<li><p><strong>Authorization</strong>:</p>
<ul>
<li>The script will need authorization to access your Gmail and Google Calendar. Click on the run button (▶️) in the script editor.</li>
<li>Follow the prompts to grant the necessary permissions to the script.</li>
</ul>
</li>
<li><p><strong>Trigger the Script</strong>:</p>
<ul>
<li>To automate the script’s execution, you can set up triggers. Click on the clock icon ⏰ in the script editor.</li>
<li>Create a new trigger that specifies when and how often the script should run. You might want it to run periodically, such as every hour.</li>
</ul>
</li>
<li><p><strong>Email Search</strong>: The script starts by searching your inbox for emails from <a href="mailto:`no-reply@gympass.com" target="_blank" rel="noopener">`no-reply@gympass.com</a>`. This ensures that it only processes Gympass emails.</p>
</li>
<li><p><strong>Email Parsing</strong>: For each Gympass email found, the script extracts the email’s subject and plain text body.</p>
</li>
<li><p><strong>Cancellation Handling</strong>: If the email subject indicates that you canceled a booking, the script performs a cancellation action (you can customize this based on your business logic).</p>
</li>
<li><p><strong>Data Extraction</strong>: For non-cancellation emails, the script removes any unnecessary footer text and URLs from the email body.</p>
</li>
<li><p><strong>Event Details Extraction</strong>: Using regular expressions, the script extracts the date, time, location, and event title from the cleaned email body.</p>
</li>
<li><p><strong>Month-to-Number Conversion</strong>: It converts the month name to a numeric value for creating a <code>Date</code> object.</p>
</li>
<li><p><strong>Event Creation</strong>: With all the details in hand, the script creates a new Google Calendar event. It includes the event title, start and end times, location, and a Google Maps link to the event’s location.</p>
</li>
<li><p><strong>Duplicate Event Check</strong>: Before creating an event, the script checks if an event with the same date, time, title, and location already exists in the calendar to avoid duplicates.</p>
</li>
</ol>
<h2 id="Code-Organization"><a href="#Code-Organization" class="headerlink" title="Code Organization"></a>Code Organization</h2><p>To keep the code clean and maintainable, I divided it into several functions:</p>
<ul>
<li><code>extractAndCreateCalendarEvent</code>: The main function that orchestrates the entire process.</li>
<li><code>extractEventDetails</code>: Extracts event details from the email body using regular expressions.</li>
<li><code>monthToNumber</code>: Converts month names to numeric values.</li>
<li><code>createCalendarEvent</code>: Creates a new Google Calendar event.</li>
<li><code>isEventExist</code>: Checks if an event with the same details already exists.</li>
<li><code>removeFooterAndUrls</code>: Removes unnecessary footer text and URLs from the email body.</li>
<li><code>cancelEvent</code>: Placeholder for handling event cancellations (customize based on your needs).</li>
<li><code>parseTime</code>: Parses time in HH:mm a format and returns it as milliseconds.</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Main function to process emails and create calendar events</span></span><br><span class="line"><span class="keyword">const</span> extractAndCreateCalendarEvent = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> searchString = <span class="string">"from:no-reply@gympass.com"</span>;</span><br><span class="line">  <span class="keyword">const</span> threads = GmailApp.search(searchString);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; threads.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> messages = threads[i].getMessages();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; messages.length; j++) &#123;</span><br><span class="line">      <span class="keyword">const</span> message = messages[j];</span><br><span class="line">      <span class="keyword">const</span> subject = message.getSubject();</span><br><span class="line">      <span class="keyword">const</span> body = message.getPlainBody();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (subject.includes(<span class="string">"You canceled your booking"</span>)) &#123;</span><br><span class="line">        cancelEvent(body);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> cleanedBody = removeFooterAndUrls(body);</span><br><span class="line">        <span class="keyword">const</span> eventDetails = extractEventDetails(cleanedBody);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (eventDetails) &#123;</span><br><span class="line">          createCalendarEvent(eventDetails, cleanedBody);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Extract the event details from the email body</span></span><br><span class="line"><span class="keyword">const</span> extractEventDetails = <span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> dateRegex = <span class="regexp">/(\w+), ([A-Za-z]+) (\d+)th at (\d+:\d+ [APap][Mm]) \(GMT\)/</span>;</span><br><span class="line">  <span class="keyword">const</span> locationRegex = <span class="regexp">/In-person • (.+)/</span>;</span><br><span class="line">  <span class="keyword">const</span> titleRegex = <span class="regexp">/(.*?) will see you/</span>;</span><br><span class="line">  <span class="keyword">const</span> timeRegex = <span class="regexp">/(\d+:\d+ [APap][Mm]) - (\d+:\d+ [APap][Mm]) \(GMT\)/</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dateMatch = body.match(dateRegex);</span><br><span class="line">  <span class="keyword">const</span> locationMatch = body.match(locationRegex);</span><br><span class="line">  <span class="keyword">const</span> titleMatch = body.match(titleRegex);</span><br><span class="line">  <span class="keyword">const</span> timeMatch = body.match(timeRegex);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (dateMatch &amp;&amp; locationMatch &amp;&amp; titleMatch &amp;&amp; timeMatch) &#123;</span><br><span class="line">    <span class="keyword">const</span> dayOfWeek = dateMatch[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> month = dateMatch[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">const</span> day = dateMatch[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">const</span> eventTimeStart = timeMatch[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> eventTimeEnd = timeMatch[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">const</span> location = locationMatch[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> eventTitle = titleMatch[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      dayOfWeek,</span><br><span class="line">      month,</span><br><span class="line">      day,</span><br><span class="line">      eventTimeStart,</span><br><span class="line">      eventTimeEnd,</span><br><span class="line">      location,</span><br><span class="line">      eventTitle,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Convert month name to a numeric value</span></span><br><span class="line"><span class="keyword">const</span> monthToNumber = <span class="function">(<span class="params">month</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> monthMap = &#123;</span><br><span class="line">    <span class="string">"January"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">"February"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">"March"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">"April"</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">"May"</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="string">"June"</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="string">"July"</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="string">"August"</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="string">"September"</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="string">"October"</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="string">"November"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="string">"December"</span>: <span class="number">11</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> monthMap[month];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a Google Calendar event</span></span><br><span class="line"><span class="keyword">const</span> createCalendarEvent = <span class="function">(<span class="params">eventDetails, cleanedContent</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    dayOfWeek,</span><br><span class="line">    month,</span><br><span class="line">    day,</span><br><span class="line">    eventTimeStart,</span><br><span class="line">    eventTimeEnd,</span><br><span class="line">    location,</span><br><span class="line">    eventTitle,</span><br><span class="line">  &#125; = eventDetails;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthNumber = monthToNumber(month);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> eventDate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear(), monthNumber, day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> eventStartTime = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear(), monthNumber, day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  eventStartTime.setMilliseconds(parseTime(eventTimeStart));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> eventEndTime = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear(), monthNumber, day, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  eventEndTime.setMilliseconds(parseTime(eventTimeEnd));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> gymName = eventTitle;</span><br><span class="line">  <span class="keyword">const</span> mapsUrl = <span class="string">'https://www.google.com/maps/search/'</span> + <span class="built_in">encodeURIComponent</span>(<span class="string">`<span class="subst">$&#123;gymName&#125;</span> <span class="subst">$&#123;location&#125;</span>`</span>);</span><br><span class="line">  <span class="keyword">const</span> description = <span class="string">`Google Maps Location URL: <span class="subst">$&#123;mapsUrl&#125;</span>\n<span class="subst">$&#123;cleanedContent&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!isEventExist(eventDate, eventEndTime, eventTitle, location)) &#123;</span><br><span class="line">    <span class="keyword">const</span> calendar = CalendarApp.getDefaultCalendar();</span><br><span class="line">    calendar.createEvent(eventTitle, eventStartTime, eventEndTime, &#123; location, description &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Check if an event already exists</span></span><br><span class="line"><span class="keyword">const</span> isEventExist = <span class="function">(<span class="params">startDate, endDate, title, location</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> calendar = CalendarApp.getDefaultCalendar();</span><br><span class="line">  <span class="keyword">const</span> events = calendar.getEvents(startDate, endDate);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; events.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (events[i].getTitle() === title &amp;&amp; events[i].getLocation() === location) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Remove footer text and URLs</span></span><br><span class="line"><span class="keyword">const</span> removeFooterAndUrls = <span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> footerRegex = <span class="regexp">/Help\n&lt;.*?&gt;[\s\S]*$/</span>;</span><br><span class="line">  <span class="keyword">const</span> cleanedBody = body.replace(footerRegex, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">const</span> urlRegex = <span class="regexp">/&lt;[^&gt;]*&gt;/g</span>;</span><br><span class="line">  <span class="keyword">const</span> cleanedContent = cleanedBody.replace(urlRegex, <span class="string">''</span>);</span><br><span class="line">  <span class="keyword">return</span> cleanedContent;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Cancel an event</span></span><br><span class="line"><span class="keyword">const</span> cancelEvent = <span class="function">(<span class="params">body</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Parse the content of the cancellation email and perform the cancellation action as needed</span></span><br><span class="line">  <span class="comment">// You can identify the event to cancel based on the information in the email content</span></span><br><span class="line">  <span class="comment">// The specific implementation of this depends on your business logic</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Helper function to parse time in HH:mm a format and return it as milliseconds</span></span><br><span class="line"><span class="keyword">const</span> parseTime = <span class="function">(<span class="params">timeString</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [time, amPm] = timeString.split(<span class="string">' '</span>);</span><br><span class="line">  <span class="keyword">const</span> [hours, minutes] = time.split(<span class="string">':'</span>);</span><br><span class="line">  <span class="keyword">let</span> hoursInt = <span class="built_in">parseInt</span>(hours, <span class="number">10</span>);</span><br><span class="line">  <span class="keyword">const</span> minutesInt = <span class="built_in">parseInt</span>(minutes, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (amPm.toLowerCase() === <span class="string">'pm'</span> &amp;&amp; hoursInt !== <span class="number">12</span>) &#123;</span><br><span class="line">    hoursInt += <span class="number">12</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (amPm.toLowerCase() === <span class="string">'am'</span> &amp;&amp; hoursInt === <span class="number">12</span>) &#123;</span><br><span class="line">    hoursInt = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (hoursInt * <span class="number">60</span> + minutesInt) * <span class="number">60000</span>; <span class="comment">// Convert to milliseconds</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Automating the creation of Google Calendar events from Gympass emails has significantly reduced the time and effort required to manage fitness classes and appointments. With this script running in the background, you can focus on your workouts and let technology take care of the scheduling.</p>
<p>By following the steps outlined in this blog post, you can set up your own automated email-to-calendar integration and adapt it to your specific needs. Happy coding!</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/" itemprop="url">
                  Nuphy keyboard with Karabinar Elements
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-11-07 11:50:44" itemprop="dateCreated datePublished" datetime="2023-11-07T11:50:44+00:00">2023-11-07</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>I recently purchased the Nuphy Air75 keyboard and encountered an issue with Karabinar Elements mapping. In this post, I’ll explain how to resolve this problem by enabling the <code>modify events</code> feature in Karabinar Elements.</p>
<img src="/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/nuphy-side.jpeg">
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>To make your Nuphy keyboard work with Karabinar Elements, follow these steps:</p>
<ol>
<li>Open Karabinar-Elements Settings.</li>
<li>Navigate to the <code>Devices</code> tab.</li>
<li>Enable the <code>Modify events</code> option for the Nuphy Keyboard.</li>
</ol>
<img src="/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/karabinar.png">
<h2 id="Additional-Information"><a href="#Additional-Information" class="headerlink" title="Additional Information"></a>Additional Information</h2><p>If you’re interested in purchasing the Air75 keyboard, you can use my affiliate link to get a 10% discount: <a href="https://nuphy.com/SMMJ" target="_blank" rel="noopener">Nuphy Affiliate Link</a>.</p>
<p>Here’s a top view of my Air75 keyboard:</p>
<img src="/2023/11/07/Nuphy-keyboard-with-Karabinar-Elements/nuphy-top.jpeg">

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/10/17/mybatis-Cannot-determine-value-type-from-string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/10/17/mybatis-Cannot-determine-value-type-from-string/" itemprop="url">
                  mybatis - Cannot determine value type from string, Cannot convert string to Timestamp
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-10-17 23:43:19" itemprop="dateCreated datePublished" datetime="2023-10-17T23:43:19+00:00">2023-10-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/10/17/mybatis-Cannot-determine-value-type-from-string/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/10/17/mybatis-Cannot-determine-value-type-from-string/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>These error occurs when selecting columns from the database that don’t match the model, for example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.dao.DataIntegrityViolationException: Error attempting to get column &apos;name&apos; from result set.  Cause: java.sql.SQLDataException: Cannot determine value type from string &apos;singming&apos;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.dao.DataIntegrityViolationException: Error attempting to get column &apos;type&apos; from result set.  Cause: java.sql.SQLDataException: Cannot convert string &apos;MALE&apos; to java.sql.Timestamp value</span><br></pre></td></tr></table></figure>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><p>Ensure your SQL query only selects columns that exist in your Java model to avoid type mismatches and data integrity issues.</p>
<h2 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h2><p>The error looks ridiculous, it is because mybatis is trying to map results from sql to some fields in the java model. e.g. mapping a <code>name VARCHAR(255)</code> to <code>Date createdTime</code> even if you add the <code>jdbcType</code> mapping in the <code>&lt;resultMap&gt;</code><br>MyBatis expects a direct mapping between columns in your SQL query and properties in your Java model. If your SQL query selects columns that don’t exist in your model, you can encounter type mismatches errors above.</p>
<p>To resolve this:</p>
<ol>
<li><p><strong>Review your SQL queries:</strong> Ensure that you only select columns that have corresponding properties in your Java model.</p>
</li>
<li><p><strong>Use aliases:</strong> If your SQL query retrieves columns with different names but equivalent data, use aliases to match them to the model properties.</p>
</li>
</ol>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MyBatis XML Mapper --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Result Map --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"userResultMap"</span> <span class="attr">type</span>=<span class="string">"User"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- SQL Query --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUsers"</span> <span class="attr">resultMap</span>=<span class="string">"userResultMap"</span>&gt;</span></span><br><span class="line">    SELECT name, age FROM users</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Java model</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this example, the SQL query and Java model are aligned, resulting in a smooth mapping without type mismatches.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/09/05/Terraform-sync-remote-state/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/09/05/Terraform-sync-remote-state/" itemprop="url">
                  Synchronizing Remote Terraform Backend States
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-09-05 00:00:00" itemprop="dateCreated datePublished" datetime="2023-09-05T00:00:00+00:00">2023-09-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/09/05/Terraform-sync-remote-state/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/09/05/Terraform-sync-remote-state/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>When cloning a project from a remote source, it’s crucial to synchronize the Terraform states from the backend to maintain consistency and accuracy.</p>
<h2 id="Syncing-Remote-Backend-State-A-Quick-Guide"><a href="#Syncing-Remote-Backend-State-A-Quick-Guide" class="headerlink" title="Syncing Remote Backend State: A Quick Guide"></a>Syncing Remote Backend State: A Quick Guide</h2><p>Follow these steps to efficiently sync your remote backend state:</p>
<h3 id="1-Initialize-and-Install-Dependencies"><a href="#1-Initialize-and-Install-Dependencies" class="headerlink" title="1. Initialize and Install Dependencies"></a>1. Initialize and Install Dependencies</h3><p>First, initiate the process and update dependencies using the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">terraform init</span><br><span class="line"></span><br><span class="line"><span class="comment"># If you need to upgrade dependencies</span></span><br><span class="line">terraform init --upgrade</span><br></pre></td></tr></table></figure>
<h3 id="2-Streamline-Variable-Input"><a href="#2-Streamline-Variable-Input" class="headerlink" title="2. Streamline Variable Input"></a>2. Streamline Variable Input</h3><p>Instead of manually inputting or exporting variables each time, simplify the process by creating a <code>terraform.tfvars</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"foo=bar"</span> &gt; terraform.tfvars</span><br></pre></td></tr></table></figure>
<h3 id="3-Removing-Items-Not-Present-in-Remote"><a href="#3-Removing-Items-Not-Present-in-Remote" class="headerlink" title="3. Removing Items Not Present in Remote"></a>3. Removing Items Not Present in Remote</h3><p>In cases where items are removed from the remote but haven’t been reflected in the state, use the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">terraform state rm &lt;resource&gt;.&lt;name&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-Importing-New-Items-to-Sync-State"><a href="#4-Importing-New-Items-to-Sync-State" class="headerlink" title="4. Importing New Items to Sync State"></a>4. Importing New Items to Sync State</h3><p>If new items have been added but aren’t yet synced with the state, consult the provider’s documentation to confirm import support. Then use the provided syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">terraform import &lt;resource&gt;.&lt;name&gt; &lt;id&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Properly synchronizing Terraform backend states ensures your project’s integrity and consistency, especially when working with remote repositories. Following these concise steps will streamline your workflow and enhance your overall development process.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2023/07/02/Training-a-Model-to-Solve-CAPTCHA-Audio-Challenges/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2023/07/02/Training-a-Model-to-Solve-CAPTCHA-Audio-Challenges/" itemprop="url">
                  Training a Model to Solve CAPTCHA Audio Challenges
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2023-07-02 20:55:11" itemprop="dateCreated datePublished" datetime="2023-07-02T20:55:11+00:00">2023-07-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2023/07/02/Training-a-Model-to-Solve-CAPTCHA-Audio-Challenges/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2023/07/02/Training-a-Model-to-Solve-CAPTCHA-Audio-Challenges/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>In this blog post, we will explore how to train a machine learning model to solve CAPTCHA audio challenges. CAPTCHA is a widely used security measure on the web to prevent automated bots from accessing websites. It presents users with various tests to determine if they are human, one of which is the audio challenge. By training a model to solve these audio challenges, we can automate the process and improve user experience. Let’s dive into the code and understand how it works.</p>
<h2 id="The-Setup"><a href="#The-Setup" class="headerlink" title="The Setup"></a>The Setup</h2><p>Before we get into the code, let’s understand the directory structure and dependencies required for this project. Here’s an overview:</p>
<ol>
<li><code>login-captcha-example</code>: This directory contains the audio files used for training and testing the model.</li>
<li><code>material</code>: This directory contains the labeled training audio files. Each audio file represents a digit in the captcha.</li>
<li><code>svm_model.pkl</code>: This is the trained SVM model file that will be generated during training.</li>
<li><code>temp</code>: This directory will be used to store temporary audio files generated during the prediction process.</li>
</ol>
<p>To get started, make sure you have the following dependencies installed:</p>
<ul>
<li><code>os</code>: A module for interacting with the operating system.</li>
<li><code>librosa</code>: A library for audio and music signal analysis.</li>
<li><code>numpy</code>: A library for mathematical operations on multi-dimensional arrays.</li>
<li><code>sklearn.svm</code>: The SVM (Support Vector Machine) model implementation from scikit-learn.</li>
<li><code>sklearn.metrics</code>: A module for evaluating the performance of machine learning models.</li>
<li><code>subprocess</code>: A module for spawning new processes and executing system commands.</li>
<li><code>string.Template</code>: A class for string templating.</li>
<li><code>joblib</code>: A library for serializing Python objects to disk and loading them back into memory.</li>
</ul>
<h2 id="Code-Walkthrough"><a href="#Code-Walkthrough" class="headerlink" title="Code Walkthrough"></a>Code Walkthrough</h2>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2023/07/02/Training-a-Model-to-Solve-CAPTCHA-Audio-Challenges/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2022/11/17/Remove-duplicate-documents-from-Mongodb-by-keys/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/11/17/Remove-duplicate-documents-from-Mongodb-by-keys/" itemprop="url">
                  Remove duplicate documents from Mongodb by keys
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-11-17 03:40:20" itemprop="dateCreated datePublished" datetime="2022-11-17T03:40:20+00:00">2022-11-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/11/17/Remove-duplicate-documents-from-Mongodb-by-keys/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/11/17/Remove-duplicate-documents-from-Mongodb-by-keys/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>To ensure there is no duplicate documents, we could create an <a href="https://www.mongodb.com/docs/v5.0/core/index-unique/" target="_blank" rel="noopener">unique index</a>.<br>However, it will throw error when there are duplicates entries in the collection:</p>
<blockquote>
<p>MongoDB cannot create a <code>unique index</code> on the specified index field(s) if the collection already contains data that would violate the unique constraint for the index.</p>
</blockquote>
<h2 id="Remove-the-duplicates-by-keys"><a href="#Remove-the-duplicates-by-keys" class="headerlink" title="Remove the duplicates by keys"></a>Remove the duplicates by keys</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> collection = db.collection(<span class="string">'MyCollection'</span>);</span><br><span class="line"><span class="keyword">const</span> operations: <span class="built_in">Promise</span>&lt;<span class="built_in">any</span>&gt;[] = [];</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'aggregation'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> collection</span><br><span class="line">  .aggregate([</span><br><span class="line">    &#123;</span><br><span class="line">      $group: &#123;</span><br><span class="line">        _id: &#123;</span><br><span class="line">          key1: <span class="string">'$key1'</span>,</span><br><span class="line">          key2: <span class="string">'$key2'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        dups: &#123;</span><br><span class="line">          $push: <span class="string">'$_id'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        count: &#123;</span><br><span class="line">          $sum: <span class="number">1</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      $match: &#123;</span><br><span class="line">        _id: &#123;</span><br><span class="line">          $ne: <span class="literal">null</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        count: &#123;</span><br><span class="line">          $gt: <span class="number">1</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ])</span><br><span class="line">  .forEach(<span class="function">(<span class="params">doc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(doc);</span><br><span class="line">    doc.dups.slice(<span class="number">1</span>).forEach(<span class="function">(<span class="params">duplicateId: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">      operations.push(collection.deleteOne(&#123; _id: duplicateId &#125;));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'aggregation'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">'remove duplicate'</span>);</span><br><span class="line"><span class="keyword">await</span> <span class="built_in">Promise</span>.all(operations);</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">'remove duplicate'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="Create-the-unique-index"><a href="#Create-the-unique-index" class="headerlink" title="Create the unique index"></a>Create the unique index</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> collection.createIndex(&#123; key1: <span class="number">1</span>, key2: <span class="number">1</span> &#125;, &#123; unique: <span class="literal">true</span>, name: <span class="string">'unique_index'</span> &#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2022/07/28/Mongodb-connection-test-inside-a-container/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/07/28/Mongodb-connection-test-inside-a-container/" itemprop="url">
                  Mongodb connection test inside a container
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-07-28 01:42:40" itemprop="dateCreated datePublished" datetime="2022-07-28T01:42:40+00:00">2022-07-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/07/28/Mongodb-connection-test-inside-a-container/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/28/Mongodb-connection-test-inside-a-container/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>To test the connection between a container and the mongoDB.</p>
<h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><ol>
<li><p>Install mongo client</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install required package</span></span><br><span class="line">apt-get install gnupg</span><br><span class="line"></span><br><span class="line"><span class="comment"># import the MongoDB public GPG Key</span></span><br><span class="line">wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | apt-key add -</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a /etc/apt/sources.list.d/mongodb-org-6.0.list file for MongoDB</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"deb http://repo.mongodb.org/apt/debian buster/mongodb-org/6.0 main"</span> | tee /etc/apt/sources.list.d/mongodb-org-6.0.list</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reload local package database.</span></span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install the MongoDB packages.</span></span><br><span class="line">apt-get install -y mongodb-org</span><br></pre></td></tr></table></figure>
</li>
<li><p>Test the connection</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Login to mongo (Use mongo or mongosh, depends on the mongodb package version)</span></span><br><span class="line">mongosh <span class="string">"mongodb://username:pwd@1.2.3.4:5/dbname?authSource=admin"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check the DB name</span></span><br><span class="line">db</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-debian/#install-mongodb-community-edition" target="_blank" rel="noopener">https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-debian/#install-mongodb-community-edition</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://www.paddingleft.com/2022/07/27/Run-puppeteer-inside-K8s-container/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Sing Ming Chen">
      <meta itemprop="description" content="Sing's log, a developer's blog">
      <meta itemprop="image" content="/uploads/avatar_speaking.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Sing's Log">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2022/07/27/Run-puppeteer-inside-K8s-container/" itemprop="url">
                  Build Puppeteer Docker image to run inside K8s cluster
                </a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2022-07-27 12:57:15" itemprop="dateCreated datePublished" datetime="2022-07-27T12:57:15+00:00">2022-07-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2024-02-16 16:55:37" itemprop="dateModified" datetime="2024-02-16T16:55:37+00:00">2024-02-16</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2022/07/27/Run-puppeteer-inside-K8s-container/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2022/07/27/Run-puppeteer-inside-K8s-container/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><ul>
<li>To run Puppeteer, you can’t just use an official Nodejs image and npm install puppeteer</li>
<li>Below is the Dockerfile that I have tried and proved as a working solution</li>
<li>More information see the <a href="https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#running-puppeteer-in-docker" target="_blank" rel="noopener">Puppeteer official troubleshooting</a></li>
</ul>
<h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">FROM alpine</span><br><span class="line"></span><br><span class="line"><span class="comment"># Installs latest Chromium (100) package.</span></span><br><span class="line">RUN apk add --no-cache \</span><br><span class="line">  chromium \</span><br><span class="line">  nss \</span><br><span class="line">  freetype \</span><br><span class="line">  harfbuzz \</span><br><span class="line">  ca-certificates \</span><br><span class="line">  ttf-freefont \</span><br><span class="line">  nodejs \</span><br><span class="line">  yarn</span><br><span class="line"></span><br><span class="line"><span class="comment"># Tell Puppeteer to skip installing Chrome. We'll be using the installed package.</span></span><br><span class="line">ENV PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=<span class="literal">true</span> \</span><br><span class="line">  PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser</span><br><span class="line"></span><br><span class="line">COPY package.json yarn.lock ./</span><br><span class="line">RUN yarn</span><br><span class="line"></span><br><span class="line"><span class="comment"># Puppeteer v13.5.0 works with Chromium 100.</span></span><br><span class="line"><span class="comment"># RUN yarn add puppeteer@13.5.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add user so we don't need --no-sandbox.</span></span><br><span class="line">RUN addgroup -S pptruser &amp;&amp; adduser -S -G pptruser pptruser \</span><br><span class="line">  &amp;&amp; mkdir -p /home/pptruser/Downloads /app \</span><br><span class="line">  &amp;&amp; chown -R pptruser:pptruser /home/pptruser \</span><br><span class="line">  &amp;&amp; chown -R pptruser:pptruser /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run everything after as non-privileged user.</span></span><br><span class="line">USER pptruser</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">EXPOSE 3003</span><br><span class="line">CMD [<span class="string">"yarn"</span>, <span class="string">"start"</span>]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/uploads/avatar_speaking.jpg" alt="Sing Ming Chen">
            
              <p class="site-author-name" itemprop="name">Sing Ming Chen</p>
              <p class="site-description motion-element" itemprop="description">Sing's log, a developer's blog</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/timeline">
                
                    <span class="site-state-item-count">84</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">240</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/asing1001" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:sing@paddingleft.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.linkedin.com/in/andychen-pro/" target="_blank" title="Linkedin" rel="external nofollow"><i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.facebook.com/sing1001" target="_blank" title="Facebook" rel="external nofollow"><i class="fa fa-fw fa-facebook"></i>Facebook</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://stackoverflow.com/users/3959161/andy-chen?tab=profile" target="_blank" title="StackOverflow" rel="external nofollow"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sing Ming Chen</span>

  

  
</div>


  



  <div class="powered-by">Powered by <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  








  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  

  
    <script id="dsq-count-scr" src="https://acslog.disqus.com/count.js" async></script>
  

  





	





  












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=6.3.0"></script>



  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
